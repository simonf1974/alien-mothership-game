!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i,r,o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(){function t(){this.currentHitPoints=0,this.hitPointReducAmt=0,this.startingHitpoints=0,this.isQueen=!1,this.id=""}return t.prototype.hit=function(){return this.currentHitPoints=Math.max(this.currentHitPoints-this.hitPointReducAmt,0),this.currentHitPoints},Object.defineProperty(t.prototype,"isAlive",{get:function(){return this.currentHitPoints>0},enumerable:!0,configurable:!0}),t.createNewObject=function(t){},t.createNewObjects=function(){for(var t=[],e=0;e<this.initialObjectNum;e++)t.push(this.createNewObject(e));return t},Object.defineProperty(t.prototype,"currentHitPointPct",{get:function(){return 0===this.currentHitPoints?.1:this.currentHitPoints/this.startingHitpoints},enumerable:!0,configurable:!0}),t.initialObjectNum=0,t}(),u=function(t){function e(e){var n=t.call(this)||this;return n.startingHitpoints=80,n.hitPointReducAmt=7,n.isQueen=!0,n.id="queen",n.currentHitPoints=n.startingHitpoints,n}return o(e,t),e.createNewObject=function(t){return new e(t)},e.initialObjectNum=1,e}(c),s=function(t){function e(e){var n=t.call(this)||this;return n.startingHitpoints=68,n.hitPointReducAmt=10,n.id="worker"+e,n.currentHitPoints=n.startingHitpoints,n}return o(e,t),e.createNewObject=function(t){return new e(t)},e.initialObjectNum=5,e}(c),a=function(t){function e(e){var n=t.call(this)||this;return n.startingHitpoints=60,n.hitPointReducAmt=12,n.id="drone"+e,n.currentHitPoints=n.startingHitpoints,n}return o(e,t),e.createNewObject=function(t){return new e(t)},e.initialObjectNum=8,e}(c),l=function(){function t(){this.aliens=[].concat(u.createNewObjects()).concat(s.createNewObjects()).concat(a.createNewObjects()),this.isGameOver=!1}return t.prototype.fire=function(){if(this.isGameOver)throw Error("Game is over. You should not be calling this method");var t=this.aliveAliens[Math.floor(Math.random()*this.aliveAliens.length)];return t.hit(),t.isAlive?this.isGameOver=!1:t.isQueen?this.isGameOver=!0:this.isGameOver=0===this.aliveAliens.length,t},Object.defineProperty(t.prototype,"aliveAliens",{get:function(){return this.aliens.filter((function(t){return t.isAlive}))},enumerable:!0,configurable:!0}),t}(),f=function(t,e,n,i){var r=document.getElementById(t),o=i?"Energy: "+e:" on sabbatical";r.getElementsByTagName("span")[1].innerText=o,r.getElementsByTagName("img")[0].style.opacity=n,r.style.color=i?"white":"red"},p=function(t){document.getElementById("fire-button").disabled=t,document.getElementById("game-over").innerText=t?"Game is over":"Game on!",document.getElementById("game-over").style.color=t?"red":"white"},m=function(){var t=r.fire();f(t.id,t.currentHitPoints,t.currentHitPointPct,t.isAlive),r.isGameOver&&p(!0)},d=function(t){r=new l,t&&(document.getElementById("fire-button").addEventListener("click",m),document.getElementById("restart-button").addEventListener("click",(function(){d(!1)})),function(){for(var t='<li id="queen"><span></span><span></span><img src="./images/jenna.jpg" alt=""></li>',e=0;e<s.initialObjectNum;e++)t+='<li id="worker'+e+'"><span></span><span></span><img src="./images/shea.jpg" alt=""></li>';for(e=0;e<a.initialObjectNum;e++)t+='<li id="drone'+e+'"><span></span><span></span><img src="./images/ollie.jpg" alt=""></li>';document.getElementsByClassName("grid")[0].innerHTML=t}()),r.aliens.forEach((function(t){return f(t.id,t.currentHitPoints,1,!0)})),p(!1)};d(!0)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NsYXNzZXMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJzaGlwIiwiY3VycmVudEhpdFBvaW50cyIsImhpdFBvaW50UmVkdWNBbXQiLCJzdGFydGluZ0hpdHBvaW50cyIsImlzUXVlZW4iLCJpZCIsImhpdCIsInRoaXMiLCJNYXRoIiwibWF4IiwiY3JlYXRlTmV3T2JqZWN0IiwibnVtIiwiY3JlYXRlTmV3T2JqZWN0cyIsIm9iamVjdHMiLCJpbml0aWFsT2JqZWN0TnVtIiwicHVzaCIsIlF1ZWVuIiwiQWxpZW4iLCJXb3JrZXIiLCJEcm9uZSIsImFsaWVucyIsImNvbmNhdCIsImlzR2FtZU92ZXIiLCJmaXJlIiwiRXJyb3IiLCJhbGllblRvVGFyZ2V0IiwiYWxpdmVBbGllbnMiLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCIsImlzQWxpdmUiLCJmaWx0ZXIiLCJhbGllbiIsInVwZGF0ZUFsaWVuIiwiaGl0UG9pbnRzIiwib3BhY2l0eSIsInRhcmdldEFsaWVuRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJtZXNzYWdlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpbm5lclRleHQiLCJzdHlsZSIsImNvbG9yIiwidXBkYXRlR2FtZVN0YXR1cyIsImRpc2FibGVkIiwidGFyZ2V0QWxpZW4iLCJjdXJyZW50SGl0UG9pbnRQY3QiLCJzdGFydCIsImlzRmlyc3RJbml0IiwiTW90aGVyU2hpcCIsImFkZEV2ZW50TGlzdGVuZXIiLCJodG1sIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImlubmVySFRNTCIsImdlbmVyYXRlQWxpZW5zIiwiZm9yRWFjaCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixH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QUNaakQsRUFBTyxJQUFJa0QsRUFDUEQsSUFDRlosU0FBU0MsZUFBZSxlQUFlYSxpQkFBaUIsUUFBUzVCLEdBQ2pFYyxTQUFTQyxlQUFlLGtCQUFrQmEsaUJBQWlCLFNBQVMsV0FDbEVILEdBQU0sTUFkVyxXQUVyQixJQURBLElBQUlJLEVBQU8sc0ZBQ0ZwRixFQUFJLEVBQUdBLEVBQUlrRCxFQUFPSixpQkFBa0I5QyxJQUMzQ29GLEdBQVEsaUJBQWlCcEYsRUFBQyx3RUFDNUIsSUFBU0EsRUFBSSxFQUFHQSxFQUFJbUQsRUFBTUwsaUJBQWtCOUMsSUFDMUNvRixHQUFRLGdCQUFnQnBGLEVBQUMseUVBQzNCcUUsU0FBU2dCLHVCQUF1QixRQUFRLEdBQUdDLFVBQVlGLEVBVXJERyxJQUVGdkQsRUFBS29CLE9BQU9vQyxTQUFRLFNBQUF4QixHQUFTLE9BQUFDLEVBQVlELEVBQU0zQixHQUFJMkIsRUFBTS9CLGlCQUFrQixHQUFHLE1BQzlFMkMsR0FBaUIsSUFHbkJJLEdBQU0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IE1vdGhlclNoaXAsIERyb25lLCBXb3JrZXIgfSBmcm9tIFwiLi9jbGFzc2VzXCI7XHJcblxyXG5jb25zdCB1cGRhdGVBbGllbiA9IChpZCwgaGl0UG9pbnRzLCBvcGFjaXR5LCBpc0FsaXZlKSA9PiB7XHJcbiAgY29uc3QgdGFyZ2V0QWxpZW5FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gIGNvbnN0IG1lc3NhZ2UgPSBpc0FsaXZlID8gYEVuZXJneTogJHtoaXRQb2ludHN9YCA6IFwiIG9uIHNhYmJhdGljYWxcIjtcclxuICB0YXJnZXRBbGllbkVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzcGFuXCIpWzFdLmlubmVyVGV4dCA9IG1lc3NhZ2U7XHJcbiAgdGFyZ2V0QWxpZW5FbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW1nXCIpWzBdLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5O1xyXG4gIHRhcmdldEFsaWVuRWxlbWVudC5zdHlsZS5jb2xvciA9IGlzQWxpdmUgPyBcIndoaXRlXCIgOiBcInJlZFwiO1xyXG59O1xyXG5cclxuY29uc3QgdXBkYXRlR2FtZVN0YXR1cyA9IGlzR2FtZU92ZXIgPT4ge1xyXG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlyZS1idXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgYnV0dG9uLmRpc2FibGVkID0gaXNHYW1lT3ZlcjtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWUtb3ZlclwiKS5pbm5lclRleHQgPSBpc0dhbWVPdmVyID8gXCJHYW1lIGlzIG92ZXJcIiA6IFwiR2FtZSBvbiFcIjtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWUtb3ZlclwiKS5zdHlsZS5jb2xvciA9IGlzR2FtZU92ZXIgPyBcInJlZFwiIDogXCJ3aGl0ZVwiO1xyXG59O1xyXG5cclxuY29uc3QgZmlyZSA9ICgpID0+IHtcclxuICBjb25zdCB0YXJnZXRBbGllbiA9IHNoaXAuZmlyZSgpO1xyXG4gIHVwZGF0ZUFsaWVuKFxyXG4gICAgdGFyZ2V0QWxpZW4uaWQsXHJcbiAgICB0YXJnZXRBbGllbi5jdXJyZW50SGl0UG9pbnRzLFxyXG4gICAgdGFyZ2V0QWxpZW4uY3VycmVudEhpdFBvaW50UGN0LFxyXG4gICAgdGFyZ2V0QWxpZW4uaXNBbGl2ZVxyXG4gICk7XHJcbiAgaWYgKHNoaXAuaXNHYW1lT3ZlcikgdXBkYXRlR2FtZVN0YXR1cyh0cnVlKTtcclxufTtcclxuXHJcbmxldCBzaGlwO1xyXG5cclxuY29uc3QgZ2VuZXJhdGVBbGllbnMgPSAoKSA9PiB7XHJcbiAgbGV0IGh0bWwgPSBgPGxpIGlkPVwicXVlZW5cIj48c3Bhbj48L3NwYW4+PHNwYW4+PC9zcGFuPjxpbWcgc3JjPVwiLi9pbWFnZXMvamVubmEuanBnXCIgYWx0PVwiXCI+PC9saT5gO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgV29ya2VyLmluaXRpYWxPYmplY3ROdW07IGkrKylcclxuICAgIGh0bWwgKz0gYDxsaSBpZD1cIndvcmtlciR7aX1cIj48c3Bhbj48L3NwYW4+PHNwYW4+PC9zcGFuPjxpbWcgc3JjPVwiLi9pbWFnZXMvc2hlYS5qcGdcIiBhbHQ9XCJcIj48L2xpPmA7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBEcm9uZS5pbml0aWFsT2JqZWN0TnVtOyBpKyspXHJcbiAgICBodG1sICs9IGA8bGkgaWQ9XCJkcm9uZSR7aX1cIj48c3Bhbj48L3NwYW4+PHNwYW4+PC9zcGFuPjxpbWcgc3JjPVwiLi9pbWFnZXMvb2xsaWUuanBnXCIgYWx0PVwiXCI+PC9saT5gO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmlkXCIpWzBdLmlubmVySFRNTCA9IGh0bWw7XHJcbn07XHJcblxyXG5jb25zdCBzdGFydCA9IGlzRmlyc3RJbml0ID0+IHtcclxuICBzaGlwID0gbmV3IE1vdGhlclNoaXAoKTtcclxuICBpZiAoaXNGaXJzdEluaXQpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlyZS1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZpcmUpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN0YXJ0LWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBzdGFydChmYWxzZSk7XHJcbiAgICB9KTtcclxuICAgIGdlbmVyYXRlQWxpZW5zKCk7XHJcbiAgfVxyXG4gIHNoaXAuYWxpZW5zLmZvckVhY2goYWxpZW4gPT4gdXBkYXRlQWxpZW4oYWxpZW4uaWQsIGFsaWVuLmN1cnJlbnRIaXRQb2ludHMsIDEsIHRydWUpKTtcclxuICB1cGRhdGVHYW1lU3RhdHVzKGZhbHNlKTtcclxufTtcclxuXHJcbnN0YXJ0KHRydWUpO1xyXG4iLCJleHBvcnQgY2xhc3MgQWxpZW4ge1xyXG4gIGN1cnJlbnRIaXRQb2ludHMgPSAwO1xyXG4gIGhpdFBvaW50UmVkdWNBbXQgPSAwO1xyXG4gIHN0YXJ0aW5nSGl0cG9pbnRzID0gMDtcclxuICBpc1F1ZWVuID0gZmFsc2U7XHJcbiAgaWQgPSBcIlwiO1xyXG4gIHN0YXRpYyBpbml0aWFsT2JqZWN0TnVtID0gMDtcclxuXHJcbiAgaGl0KCkge1xyXG4gICAgdGhpcy5jdXJyZW50SGl0UG9pbnRzID0gTWF0aC5tYXgodGhpcy5jdXJyZW50SGl0UG9pbnRzIC0gdGhpcy5oaXRQb2ludFJlZHVjQW10LCAwKTtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRIaXRQb2ludHM7XHJcbiAgfVxyXG5cclxuICBnZXQgaXNBbGl2ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRIaXRQb2ludHMgPiAwO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZU5ld09iamVjdChudW0pIHt9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGVOZXdPYmplY3RzKCkge1xyXG4gICAgY29uc3Qgb2JqZWN0cyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmluaXRpYWxPYmplY3ROdW07IGkrKykge1xyXG4gICAgICBvYmplY3RzLnB1c2godGhpcy5jcmVhdGVOZXdPYmplY3QoaSkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9iamVjdHM7XHJcbiAgfVxyXG5cclxuICBnZXQgY3VycmVudEhpdFBvaW50UGN0KCkge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudEhpdFBvaW50cyA9PT0gMCkgcmV0dXJuIDAuMTtcclxuICAgIGVsc2UgcmV0dXJuIHRoaXMuY3VycmVudEhpdFBvaW50cyAvIHRoaXMuc3RhcnRpbmdIaXRwb2ludHM7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUXVlZW4gZXh0ZW5kcyBBbGllbiB7XHJcbiAgc3RhcnRpbmdIaXRwb2ludHMgPSA4MDtcclxuICBoaXRQb2ludFJlZHVjQW10ID0gNztcclxuICBpc1F1ZWVuID0gdHJ1ZTtcclxuICBzdGF0aWMgaW5pdGlhbE9iamVjdE51bSA9IDE7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG51bSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuaWQgPSBcInF1ZWVuXCI7XHJcbiAgICB0aGlzLmN1cnJlbnRIaXRQb2ludHMgPSB0aGlzLnN0YXJ0aW5nSGl0cG9pbnRzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZU5ld09iamVjdChudW0pIHtcclxuICAgIHJldHVybiBuZXcgUXVlZW4obnVtKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXb3JrZXIgZXh0ZW5kcyBBbGllbiB7XHJcbiAgc3RhcnRpbmdIaXRwb2ludHMgPSA2ODtcclxuICBoaXRQb2ludFJlZHVjQW10ID0gMTA7XHJcbiAgc3RhdGljIGluaXRpYWxPYmplY3ROdW0gPSA1O1xyXG5cclxuICBjb25zdHJ1Y3RvcihudW0pIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmlkID0gXCJ3b3JrZXJcIiArIG51bTtcclxuICAgIHRoaXMuY3VycmVudEhpdFBvaW50cyA9IHRoaXMuc3RhcnRpbmdIaXRwb2ludHM7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlTmV3T2JqZWN0KG51bSkge1xyXG4gICAgcmV0dXJuIG5ldyBXb3JrZXIobnVtKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEcm9uZSBleHRlbmRzIEFsaWVuIHtcclxuICBzdGFydGluZ0hpdHBvaW50cyA9IDYwO1xyXG4gIGhpdFBvaW50UmVkdWNBbXQgPSAxMjtcclxuICBzdGF0aWMgaW5pdGlhbE9iamVjdE51bSA9IDg7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG51bSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuaWQgPSBcImRyb25lXCIgKyBudW07XHJcbiAgICB0aGlzLmN1cnJlbnRIaXRQb2ludHMgPSB0aGlzLnN0YXJ0aW5nSGl0cG9pbnRzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZU5ld09iamVjdChudW0pIHtcclxuICAgIHJldHVybiBuZXcgRHJvbmUobnVtKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNb3RoZXJTaGlwIHtcclxuICBwdWJsaWMgYWxpZW5zO1xyXG4gIHB1YmxpYyBpc0dhbWVPdmVyO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuYWxpZW5zID0gW11cclxuICAgICAgLmNvbmNhdChRdWVlbi5jcmVhdGVOZXdPYmplY3RzKCkpXHJcbiAgICAgIC5jb25jYXQoV29ya2VyLmNyZWF0ZU5ld09iamVjdHMoKSlcclxuICAgICAgLmNvbmNhdChEcm9uZS5jcmVhdGVOZXdPYmplY3RzKCkpO1xyXG4gICAgdGhpcy5pc0dhbWVPdmVyID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBmaXJlKCkge1xyXG4gICAgaWYgKHRoaXMuaXNHYW1lT3ZlcikgdGhyb3cgRXJyb3IoXCJHYW1lIGlzIG92ZXIuIFlvdSBzaG91bGQgbm90IGJlIGNhbGxpbmcgdGhpcyBtZXRob2RcIik7XHJcblxyXG4gICAgY29uc3QgYWxpZW5Ub1RhcmdldCA9IHRoaXMuYWxpdmVBbGllbnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5hbGl2ZUFsaWVucy5sZW5ndGgpXTtcclxuICAgIGFsaWVuVG9UYXJnZXQuaGl0KCk7XHJcblxyXG4gICAgaWYgKGFsaWVuVG9UYXJnZXQuaXNBbGl2ZSkge1xyXG4gICAgICB0aGlzLmlzR2FtZU92ZXIgPSBmYWxzZTtcclxuICAgIH0gZWxzZSBpZiAoYWxpZW5Ub1RhcmdldC5pc1F1ZWVuKSB7XHJcbiAgICAgIHRoaXMuaXNHYW1lT3ZlciA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmlzR2FtZU92ZXIgPSB0aGlzLmFsaXZlQWxpZW5zLmxlbmd0aCA9PT0gMDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYWxpZW5Ub1RhcmdldDtcclxuICB9XHJcblxyXG4gIGdldCBhbGl2ZUFsaWVucygpIHtcclxuICAgIHJldHVybiB0aGlzLmFsaWVucy5maWx0ZXIoYWxpZW4gPT4ge1xyXG4gICAgICByZXR1cm4gYWxpZW4uaXNBbGl2ZTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9