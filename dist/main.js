!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i,r,o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(){function t(){this.currentHitPoints=0,this.hitPointReducAmt=0,this.startingHitpoints=0,this.isQueen=!1,this.id=""}return t.prototype.hit=function(){return this.currentHitPoints=Math.max(this.currentHitPoints-this.hitPointReducAmt,0),this.currentHitPoints},Object.defineProperty(t.prototype,"isAlive",{get:function(){return this.currentHitPoints>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentHitPointPct",{get:function(){return 0===this.currentHitPoints?.1:this.currentHitPoints/this.startingHitpoints},enumerable:!0,configurable:!0}),t.createNewObjects=function(){for(var t=[],e=0;e<this.initialObjectNum;e++)t.push(this.createNewObject(e));return t},t.createNewObject=function(t){},t.initialObjectNum=0,t}(),u=function(t){function e(e){var n=t.call(this)||this;return n.startingHitpoints=80,n.hitPointReducAmt=7,n.isQueen=!0,n.id="queen",n.currentHitPoints=n.startingHitpoints,n}return o(e,t),e.createNewObject=function(t){return new e(t)},e.initialObjectNum=1,e}(c),s=function(t){function e(e){var n=t.call(this)||this;return n.startingHitpoints=68,n.hitPointReducAmt=10,n.id="worker"+e,n.currentHitPoints=n.startingHitpoints,n}return o(e,t),e.createNewObject=function(t){return new e(t)},e.initialObjectNum=5,e}(c),a=function(t){function e(e){var n=t.call(this)||this;return n.startingHitpoints=60,n.hitPointReducAmt=12,n.id="drone"+e,n.currentHitPoints=n.startingHitpoints,n}return o(e,t),e.createNewObject=function(t){return new e(t)},e.initialObjectNum=8,e}(c),l=function(){function t(){this.aliens=[].concat(u.createNewObjects()).concat(s.createNewObjects()).concat(a.createNewObjects()),this.isGameOver=!1}return t.prototype.fire=function(){if(this.isGameOver)throw Error("Game is over. You should not be calling this method");var t=this.aliveAliens[Math.floor(Math.random()*this.aliveAliens.length)];return t.hit(),t.isAlive?this.isGameOver=!1:t.isQueen?this.isGameOver=!0:this.isGameOver=0===this.aliveAliens.length,t},Object.defineProperty(t.prototype,"aliveAliens",{get:function(){return this.aliens.filter((function(t){return t.isAlive}))},enumerable:!0,configurable:!0}),t}(),f=function(t,e,n,i){var r=document.getElementById(t),o=i?"Energy: "+e:" on sabbatical";r.getElementsByTagName("span")[1].innerText=o,r.getElementsByTagName("img")[0].style.opacity=n.toString(),r.style.color=i?"white":"red"},p=function(t){document.getElementById("fire-button").disabled=t,document.getElementById("game-over").innerText=t?"Game is over":"Game on!",document.getElementById("game-over").style.color=t?"red":"white"},m=function(){var t=r.fire();f(t.id,t.currentHitPoints,t.currentHitPointPct,t.isAlive),r.isGameOver&&p(!0)},d=function(t){r=new l,t&&(document.getElementById("fire-button").addEventListener("click",m),document.getElementById("restart-button").addEventListener("click",(function(){d(!1)})),function(){for(var t='<li id="queen"><span></span><span></span><img src="./images/jenna.jpg" alt=""></li>',e=0;e<s.initialObjectNum;e++)t+='<li id="worker'+e+'"><span></span><span></span><img src="./images/shea.jpg" alt=""></li>';for(e=0;e<a.initialObjectNum;e++)t+='<li id="drone'+e+'"><span></span><span></span><img src="./images/ollie.jpg" alt=""></li>';document.getElementsByClassName("grid")[0].innerHTML=t}()),r.aliens.forEach((function(t){return f(t.id,t.currentHitPoints,1,!0)})),p(!1)};d(!0)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NsYXNzZXMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJzaGlwIiwiY3VycmVudEhpdFBvaW50cyIsImhpdFBvaW50UmVkdWNBbXQiLCJzdGFydGluZ0hpdHBvaW50cyIsImlzUXVlZW4iLCJpZCIsImhpdCIsInRoaXMiLCJNYXRoIiwibWF4IiwiY3JlYXRlTmV3T2JqZWN0cyIsIm9iamVjdHMiLCJpbml0aWFsT2JqZWN0TnVtIiwicHVzaCIsImNyZWF0ZU5ld09iamVjdCIsIm51bSIsIlF1ZWVuIiwiQWxpZW4iLCJXb3JrZXIiLCJEcm9uZSIsImFsaWVucyIsImNvbmNhdCIsImlzR2FtZU92ZXIiLCJmaXJlIiwiRXJyb3IiLCJhbGllblRvVGFyZ2V0IiwiYWxpdmVBbGllbnMiLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCIsImlzQWxpdmUiLCJmaWx0ZXIiLCJhbGllbiIsInVwZGF0ZUFsaWVuIiwiaGl0UG9pbnRzIiwib3BhY2l0eSIsInRhcmdldEFsaWVuRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJtZXNzYWdlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpbm5lclRleHQiLCJzdHlsZSIsInRvU3RyaW5nIiwiY29sb3IiLCJ1cGRhdGVHYW1lU3RhdHVzIiwiZGlzYWJsZWQiLCJ0YXJnZXRBbGllbiIsImN1cnJlbnRIaXRQb2ludFBjdCIsInN0YXJ0IiwiaXNGaXJzdEluaXQiLCJNb3RoZXJTaGlwIiwiYWRkRXZlbnRMaXN0ZW5lciIsImh0bWwiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaW5uZXJIVE1MIiwiZ2VuZXJhdGVBbGllbnMiLCJmb3JFYWNoIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FB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dUIsR0FBaUIsSUFjbENJLEVBQVEsU0FBQ0MsR0FDYmxELEVBQU8sSUFBSW1ELEVBQ1BELElBQ0ZiLFNBQVNDLGVBQWUsZUFBZWMsaUJBQWlCLFFBQVM3QixHQUNqRWMsU0FBU0MsZUFBZSxrQkFBa0JjLGlCQUFpQixTQUFTLFdBQ2xFSCxHQUFNLE1BZFcsV0FFckIsSUFEQSxJQUFJSSxFQUFlLHNGQUNWckYsRUFBSSxFQUFHQSxFQUFJa0QsRUFBT04saUJBQWtCNUMsSUFDM0NxRixHQUFRLGlCQUFpQnJGLEVBQUMsd0VBQzVCLElBQVNBLEVBQUksRUFBR0EsRUFBSW1ELEVBQU1QLGlCQUFrQjVDLElBQzFDcUYsR0FBUSxnQkFBZ0JyRixFQUFDLHlFQUMzQnFFLFNBQVNpQix1QkFBdUIsUUFBUSxHQUFHQyxVQUFZRixFQVVyREcsSUFFRnhELEVBQUtvQixPQUFPcUMsU0FBUSxTQUFBekIsR0FBUyxPQUFBQyxFQUFZRCxFQUFNM0IsR0FBSTJCLEVBQU0vQixpQkFBa0IsR0FBRyxNQUM5RTRDLEdBQWlCLElBR25CSSxHQUFNIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBNb3RoZXJTaGlwLCBEcm9uZSwgV29ya2VyLCBBbGllbiB9IGZyb20gXCIuL2NsYXNzZXNcIjtcclxuXHJcbmNvbnN0IHVwZGF0ZUFsaWVuID0gKGlkOiBzdHJpbmcsIGhpdFBvaW50czogbnVtYmVyLCBvcGFjaXR5OiBudW1iZXIsIGlzQWxpdmU6IGJvb2xlYW4pOiB2b2lkID0+IHtcclxuICBjb25zdCB0YXJnZXRBbGllbkVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gIGNvbnN0IG1lc3NhZ2U6IHN0cmluZyA9IGlzQWxpdmUgPyBgRW5lcmd5OiAke2hpdFBvaW50c31gIDogXCIgb24gc2FiYmF0aWNhbFwiO1xyXG4gIHRhcmdldEFsaWVuRWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNwYW5cIilbMV0uaW5uZXJUZXh0ID0gbWVzc2FnZTtcclxuICB0YXJnZXRBbGllbkVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbWdcIilbMF0uc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkudG9TdHJpbmcoKTtcclxuICB0YXJnZXRBbGllbkVsZW1lbnQuc3R5bGUuY29sb3IgPSBpc0FsaXZlID8gXCJ3aGl0ZVwiIDogXCJyZWRcIjtcclxufTtcclxuXHJcbmNvbnN0IHVwZGF0ZUdhbWVTdGF0dXMgPSAoaXNHYW1lT3ZlcjogYm9vbGVhbik6IHZvaWQgPT4ge1xyXG4gIGNvbnN0IGJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpcmUtYnV0dG9uXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gIGJ1dHRvbi5kaXNhYmxlZCA9IGlzR2FtZU92ZXI7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lLW92ZXJcIikuaW5uZXJUZXh0ID0gaXNHYW1lT3ZlciA/IFwiR2FtZSBpcyBvdmVyXCIgOiBcIkdhbWUgb24hXCI7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lLW92ZXJcIikuc3R5bGUuY29sb3IgPSBpc0dhbWVPdmVyID8gXCJyZWRcIiA6IFwid2hpdGVcIjtcclxufTtcclxuXHJcbmNvbnN0IGZpcmUgPSAoKSA9PiB7XHJcbiAgY29uc3QgdGFyZ2V0QWxpZW46IEFsaWVuID0gc2hpcC5maXJlKCk7XHJcbiAgdXBkYXRlQWxpZW4oXHJcbiAgICB0YXJnZXRBbGllbi5pZCxcclxuICAgIHRhcmdldEFsaWVuLmN1cnJlbnRIaXRQb2ludHMsXHJcbiAgICB0YXJnZXRBbGllbi5jdXJyZW50SGl0UG9pbnRQY3QsXHJcbiAgICB0YXJnZXRBbGllbi5pc0FsaXZlXHJcbiAgKTtcclxuICBpZiAoc2hpcC5pc0dhbWVPdmVyKSB1cGRhdGVHYW1lU3RhdHVzKHRydWUpO1xyXG59O1xyXG5cclxubGV0IHNoaXA6IE1vdGhlclNoaXA7XHJcblxyXG5jb25zdCBnZW5lcmF0ZUFsaWVucyA9ICgpOiB2b2lkID0+IHtcclxuICBsZXQgaHRtbDogc3RyaW5nID0gYDxsaSBpZD1cInF1ZWVuXCI+PHNwYW4+PC9zcGFuPjxzcGFuPjwvc3Bhbj48aW1nIHNyYz1cIi4vaW1hZ2VzL2plbm5hLmpwZ1wiIGFsdD1cIlwiPjwvbGk+YDtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IFdvcmtlci5pbml0aWFsT2JqZWN0TnVtOyBpKyspXHJcbiAgICBodG1sICs9IGA8bGkgaWQ9XCJ3b3JrZXIke2l9XCI+PHNwYW4+PC9zcGFuPjxzcGFuPjwvc3Bhbj48aW1nIHNyYz1cIi4vaW1hZ2VzL3NoZWEuanBnXCIgYWx0PVwiXCI+PC9saT5gO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgRHJvbmUuaW5pdGlhbE9iamVjdE51bTsgaSsrKVxyXG4gICAgaHRtbCArPSBgPGxpIGlkPVwiZHJvbmUke2l9XCI+PHNwYW4+PC9zcGFuPjxzcGFuPjwvc3Bhbj48aW1nIHNyYz1cIi4vaW1hZ2VzL29sbGllLmpwZ1wiIGFsdD1cIlwiPjwvbGk+YDtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JpZFwiKVswXS5pbm5lckhUTUwgPSBodG1sO1xyXG59O1xyXG5cclxuY29uc3Qgc3RhcnQgPSAoaXNGaXJzdEluaXQ6IGJvb2xlYW4pOiB2b2lkID0+IHtcclxuICBzaGlwID0gbmV3IE1vdGhlclNoaXAoKTtcclxuICBpZiAoaXNGaXJzdEluaXQpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlyZS1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZpcmUpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN0YXJ0LWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBzdGFydChmYWxzZSk7XHJcbiAgICB9KTtcclxuICAgIGdlbmVyYXRlQWxpZW5zKCk7XHJcbiAgfVxyXG4gIHNoaXAuYWxpZW5zLmZvckVhY2goYWxpZW4gPT4gdXBkYXRlQWxpZW4oYWxpZW4uaWQsIGFsaWVuLmN1cnJlbnRIaXRQb2ludHMsIDEsIHRydWUpKTtcclxuICB1cGRhdGVHYW1lU3RhdHVzKGZhbHNlKTtcclxufTtcclxuXHJcbnN0YXJ0KHRydWUpO1xyXG4iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgQWxpZW4ge1xyXG4gIGN1cnJlbnRIaXRQb2ludHM6IG51bWJlciA9IDA7XHJcbiAgaGl0UG9pbnRSZWR1Y0FtdDogbnVtYmVyID0gMDtcclxuICBzdGFydGluZ0hpdHBvaW50czogbnVtYmVyID0gMDtcclxuICBpc1F1ZWVuOiBib29sZWFuID0gZmFsc2U7XHJcbiAgaWQ6IHN0cmluZyA9IFwiXCI7XHJcbiAgc3RhdGljIGluaXRpYWxPYmplY3ROdW06IG51bWJlciA9IDA7XHJcblxyXG4gIGhpdCgpOiBudW1iZXIge1xyXG4gICAgdGhpcy5jdXJyZW50SGl0UG9pbnRzID0gTWF0aC5tYXgodGhpcy5jdXJyZW50SGl0UG9pbnRzIC0gdGhpcy5oaXRQb2ludFJlZHVjQW10LCAwKTtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRIaXRQb2ludHM7XHJcbiAgfVxyXG5cclxuICBnZXQgaXNBbGl2ZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRIaXRQb2ludHMgPiAwO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGN1cnJlbnRIaXRQb2ludFBjdCgpOiBudW1iZXIge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudEhpdFBvaW50cyA9PT0gMCkgcmV0dXJuIDAuMTtcclxuICAgIGVsc2UgcmV0dXJuIHRoaXMuY3VycmVudEhpdFBvaW50cyAvIHRoaXMuc3RhcnRpbmdIaXRwb2ludHM7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlTmV3T2JqZWN0cygpOiBBbGllbltdIHtcclxuICAgIGNvbnN0IG9iamVjdHM6IEFsaWVuW10gPSBbXTtcclxuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLmluaXRpYWxPYmplY3ROdW07IGkrKykge1xyXG4gICAgICBvYmplY3RzLnB1c2godGhpcy5jcmVhdGVOZXdPYmplY3QoaSkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9iamVjdHM7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlTmV3T2JqZWN0KG51bTogbnVtYmVyKTogQWxpZW4ge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFF1ZWVuIGV4dGVuZHMgQWxpZW4ge1xyXG4gIHN0YXJ0aW5nSGl0cG9pbnRzOiBudW1iZXIgPSA4MDtcclxuICBoaXRQb2ludFJlZHVjQW10OiBudW1iZXIgPSA3O1xyXG4gIGlzUXVlZW46IGJvb2xlYW4gPSB0cnVlO1xyXG4gIHN0YXRpYyBpbml0aWFsT2JqZWN0TnVtOiBudW1iZXIgPSAxO1xyXG5cclxuICBjb25zdHJ1Y3RvcihudW06IG51bWJlcikge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuaWQgPSBcInF1ZWVuXCI7XHJcbiAgICB0aGlzLmN1cnJlbnRIaXRQb2ludHMgPSB0aGlzLnN0YXJ0aW5nSGl0cG9pbnRzO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZU5ld09iamVjdChudW06IG51bWJlcik6IFF1ZWVuIHtcclxuICAgIHJldHVybiBuZXcgUXVlZW4obnVtKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXb3JrZXIgZXh0ZW5kcyBBbGllbiB7XHJcbiAgc3RhcnRpbmdIaXRwb2ludHM6IG51bWJlciA9IDY4O1xyXG4gIGhpdFBvaW50UmVkdWNBbXQ6IG51bWJlciA9IDEwO1xyXG4gIHN0YXRpYyBpbml0aWFsT2JqZWN0TnVtOiBudW1iZXIgPSA1O1xyXG5cclxuICBjb25zdHJ1Y3RvcihudW06IG51bWJlcikge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuaWQgPSBcIndvcmtlclwiICsgbnVtO1xyXG4gICAgdGhpcy5jdXJyZW50SGl0UG9pbnRzID0gdGhpcy5zdGFydGluZ0hpdHBvaW50cztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGVOZXdPYmplY3QobnVtOiBudW1iZXIpOiBXb3JrZXIge1xyXG4gICAgcmV0dXJuIG5ldyBXb3JrZXIobnVtKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEcm9uZSBleHRlbmRzIEFsaWVuIHtcclxuICBzdGFydGluZ0hpdHBvaW50czogbnVtYmVyID0gNjA7XHJcbiAgaGl0UG9pbnRSZWR1Y0FtdDogbnVtYmVyID0gMTI7XHJcbiAgc3RhdGljIGluaXRpYWxPYmplY3ROdW06IG51bWJlciA9IDg7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG51bTogbnVtYmVyKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gICAgdGhpcy5pZCA9IFwiZHJvbmVcIiArIG51bTtcclxuICAgIHRoaXMuY3VycmVudEhpdFBvaW50cyA9IHRoaXMuc3RhcnRpbmdIaXRwb2ludHM7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY3JlYXRlTmV3T2JqZWN0KG51bTogbnVtYmVyKTogRHJvbmUge1xyXG4gICAgcmV0dXJuIG5ldyBEcm9uZShudW0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE1vdGhlclNoaXAge1xyXG4gIHB1YmxpYyBhbGllbnM6IEFsaWVuW107XHJcbiAgcHVibGljIGlzR2FtZU92ZXI6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5hbGllbnMgPSBbXVxyXG4gICAgICAuY29uY2F0KFF1ZWVuLmNyZWF0ZU5ld09iamVjdHMoKSlcclxuICAgICAgLmNvbmNhdChXb3JrZXIuY3JlYXRlTmV3T2JqZWN0cygpKVxyXG4gICAgICAuY29uY2F0KERyb25lLmNyZWF0ZU5ld09iamVjdHMoKSk7XHJcbiAgICB0aGlzLmlzR2FtZU92ZXIgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGZpcmUoKTogQWxpZW4ge1xyXG4gICAgaWYgKHRoaXMuaXNHYW1lT3ZlcikgdGhyb3cgRXJyb3IoXCJHYW1lIGlzIG92ZXIuIFlvdSBzaG91bGQgbm90IGJlIGNhbGxpbmcgdGhpcyBtZXRob2RcIik7XHJcblxyXG4gICAgY29uc3QgYWxpZW5Ub1RhcmdldDogQWxpZW4gPSB0aGlzLmFsaXZlQWxpZW5zW1xyXG4gICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLmFsaXZlQWxpZW5zLmxlbmd0aClcclxuICAgIF07XHJcbiAgICBhbGllblRvVGFyZ2V0LmhpdCgpO1xyXG5cclxuICAgIGlmIChhbGllblRvVGFyZ2V0LmlzQWxpdmUpIHtcclxuICAgICAgdGhpcy5pc0dhbWVPdmVyID0gZmFsc2U7XHJcbiAgICB9IGVsc2UgaWYgKGFsaWVuVG9UYXJnZXQuaXNRdWVlbikge1xyXG4gICAgICB0aGlzLmlzR2FtZU92ZXIgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pc0dhbWVPdmVyID0gdGhpcy5hbGl2ZUFsaWVucy5sZW5ndGggPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFsaWVuVG9UYXJnZXQ7XHJcbiAgfVxyXG5cclxuICBnZXQgYWxpdmVBbGllbnMoKTogQWxpZW5bXSB7XHJcbiAgICByZXR1cm4gdGhpcy5hbGllbnMuZmlsdGVyKGFsaWVuID0+IHtcclxuICAgICAgcmV0dXJuIGFsaWVuLmlzQWxpdmU7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==